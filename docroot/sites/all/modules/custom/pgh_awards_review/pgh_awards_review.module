<?php

/**
 * @file
 * Provides internal functionality for handling review.
 *
 * @author Fang Jin <fang@designhammer.com>
 */

/**
 * Implements hook_menu().
 *
 * @author Fang Jin <fang@designhammer.com>
 */
function pgh_awards_review_menu() {
  $items = array();

  $items['review/%nid'] = array(
    'title' => 'Review Application',
    'description' => 'Review application and give quality score etc.',
    'page callback' => 'pgh_awards_review_page',
    'page arguments' => array(1),
    'access callback' => 'node_access',
    'access arguments' => array('delete', 1),
  );

  return $items;
}

/**
 * Fake page, real template is in page--review.tpl.php.
 */
function pgh_awards_review_page() {
  return '';
}

/**
 * Implements hook_preprocess_page().
 */
function pgh_awards_review_preprocess_page(&$vars) {
  $app_id = 101304;
  $app = node_load($app_id);
  $app_wrapper = entity_metadata_wrapper('node', $app);

  $apptype_tag = $app_wrapper->field_application_type->raw();


  // update application information
  $vars['application'] = array(
    'id' => arg(1),
    'apptype_id' => $apptype_tag,
  );

  // update business unit information
  $vars['bussiness-unit'] = array(
    'id' => 11,
  );
}